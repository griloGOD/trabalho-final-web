-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.usuario
(
    codigo serial NOT NULL,
    nome text,
    cpf text,
    telefone text,
    usuario text,
    senha text,
    ativo boolean,
    PRIMARY KEY (codigo)
);

CREATE TABLE IF NOT EXISTS public.papel
(
    codigo serial NOT NULL,
    nome text,
    PRIMARY KEY (codigo)
);

CREATE TABLE IF NOT EXISTS public.usuario_papel
(
    codigo_papel bigint,
    codigo_usuario bigint
);

CREATE TABLE IF NOT EXISTS public.quadra
(
    codigo serial NOT NULL,
    tipo text,
    valor double precision,
    PRIMARY KEY (codigo)
);

CREATE TABLE IF NOT EXISTS public.reserva
(
    codigo serial NOT NULL,
    codigo_usuario bigint,
    codigo_quadra bigint,
    dia date,
    horario bigint,
    PRIMARY KEY (codigo)
);

ALTER TABLE IF EXISTS public.usuario_papel
    ADD FOREIGN KEY (codigo_papel)
    REFERENCES public.papel (codigo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.usuario_papel
    ADD FOREIGN KEY (codigo_usuario)
    REFERENCES public.usuario (codigo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.reserva
    ADD FOREIGN KEY (codigo_usuario)
    REFERENCES public.usuario (codigo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;


ALTER TABLE IF EXISTS public.reserva
    ADD FOREIGN KEY (codigo_quadra)
    REFERENCES public.quadra (codigo) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;